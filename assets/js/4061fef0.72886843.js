"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[23877],{28453:(e,i,a)=>{a.d(i,{R:()=>c,x:()=>o});var r=a(296540);const s={},n=r.createContext(s);function c(e){const i=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(n.Provider,{value:i},e.children)}},125645:(e,i,a)=>{a.r(i),a.d(i,{assets:()=>t,contentTitle:()=>d,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"devs/instalacion/Actualizar-Migrar","title":"Actualizar o Migrar el Sistema","description":"Gu\xeda para actualizar el sistema Pro7 o migrar desde Pro6.","source":"@site/Pro7/devs/instalacion/05-Actualizar-Migrar.md","sourceDirName":"devs/instalacion","slug":"/devs/instalacion/Actualizar-Migrar","permalink":"/pro7/devs/instalacion/Actualizar-Migrar","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Actualizar o Migrar el Sistema","description":"Gu\xeda para actualizar el sistema Pro7 o migrar desde Pro6.","sidebar_position":1},"sidebar":"docs","previous":{"title":"Windows","permalink":"/pro7/devs/instalacion/Windows"},"next":{"title":"Docker - Linux","permalink":"/pro7/devs/instalacion/Docker-Linux"}}');var s=a(474848),n=a(28453),c=a(278335),o=a(716562);const l={title:"Actualizar o Migrar el Sistema",description:"Gu\xeda para actualizar el sistema Pro7 o migrar desde Pro6.",sidebar_position:1},d="Gu\xeda para Actualizar o Migrar el Sistema",t={},h=[{value:"\u26a0\ufe0f Migraci\xf3n de Servidor GitLab",id:"\ufe0f-migraci\xf3n-de-servidor-gitlab",level:2},{value:"\ud83d\udccb Pre Requisitos",id:"-pre-requisitos",level:2},{value:"Gu\xedas Disponibles",id:"gu\xedas-disponibles",level:2},{value:"1. Conexi\xf3n al Servidor",id:"1-conexi\xf3n-al-servidor",level:2},{value:"1.1 Acceso por SSH",id:"11-acceso-por-ssh",level:3},{value:"1.2 Verificar contenedores activos",id:"12-verificar-contenedores-activos",level:3},{value:"1.3 Acceder al contenedor FPM",id:"13-acceder-al-contenedor-fpm",level:3},{value:"2. Preparaci\xf3n del Entorno",id:"2-preparaci\xf3n-del-entorno",level:2},{value:"2.1 Verificar estado del repositorio",id:"21-verificar-estado-del-repositorio",level:3},{value:"2.2 Guardar cambios locales (si los hay)",id:"22-guardar-cambios-locales-si-los-hay",level:3},{value:"2.3 Verificar la URL del repositorio remoto",id:"23-verificar-la-url-del-repositorio-remoto",level:3},{value:"3. Actualizaci\xf3n Est\xe1ndar",id:"3-actualizaci\xf3n-est\xe1ndar",level:2},{value:"3.1 Descargar cambios",id:"31-descargar-cambios",level:3},{value:"3.2 Recuperar cambios guardados (si aplicaste stash)",id:"32-recuperar-cambios-guardados-si-aplicaste-stash",level:3},{value:"3.3 Aplicar migraciones y optimizaciones",id:"33-aplicar-migraciones-y-optimizaciones",level:3},{value:"4. Migraci\xf3n de Pro6 a Pro7",id:"4-migraci\xf3n-de-pro6-a-pro7",level:2},{value:"4.1 Cambiar repositorio remoto",id:"41-cambiar-repositorio-remoto",level:3},{value:"4.2 Verificar configuraci\xf3n",id:"42-verificar-configuraci\xf3n",level:3},{value:"4.3 Proceso de migraci\xf3n completa",id:"43-proceso-de-migraci\xf3n-completa",level:3},{value:"4.4 Verificaci\xf3n post-migraci\xf3n",id:"44-verificaci\xf3n-post-migraci\xf3n",level:3},{value:"5. Soluci\xf3n de Problemas Comunes",id:"5-soluci\xf3n-de-problemas-comunes",level:2},{value:"Conflictos de merge",id:"conflictos-de-merge",level:3},{value:"Precauciones y Recomendaciones",id:"precauciones-y-recomendaciones",level:2},{value:"\u26a0\ufe0f Precauciones",id:"\ufe0f-precauciones",level:3},{value:"\ud83d\udeab Evitar",id:"-evitar",level:3}];function u(e){const i={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"gu\xeda-para-actualizar-o-migrar-el-sistema",children:"Gu\xeda para Actualizar o Migrar el Sistema"})}),"\n",(0,s.jsx)(i.h2,{id:"\ufe0f-migraci\xf3n-de-servidor-gitlab",children:"\u26a0\ufe0f Migraci\xf3n de Servidor GitLab"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Hemos migrado nuestro servidor de GitLab."})," Si a\xfan no has actualizado la URL del repositorio, te recomendamos verificar y cambiar la configuraci\xf3n antes de continuar."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Nueva URL:"})," ",(0,s.jsx)(i.code,{children:"git.buho.la"})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-pre-requisitos",children:"\ud83d\udccb Pre Requisitos"}),"\n",(0,s.jsx)(i.p,{children:"Antes de comenzar, aseg\xfarate de tener:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Acceso SSH al servidor"}),"\n",(0,s.jsx)(i.li,{children:"Credenciales v\xe1lidas de GitLab (usuario y token)"}),"\n",(0,s.jsx)(i.li,{children:"Permisos para ejecutar comandos Docker"}),"\n",(0,s.jsx)(i.li,{children:"Una suscripci\xf3n activa para migrar de Pro6 a Pro7"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"gu\xedas-disponibles",children:"Gu\xedas Disponibles"}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(c.A,{header:"Actualizaci\xf3n Est\xe1ndar",href:"#3-actualizaci\xf3n-est\xe1ndar",children:(0,s.jsx)("p",{children:"Para usuarios que ya tienen Pro7 y solo necesitan actualizar a la \xfaltima versi\xf3n."})}),(0,s.jsx)(c.A,{header:"Migraci\xf3n Pro6 \u2192 Pro7",href:"#4-migraci\xf3n-de-pro6-a-pro7",children:(0,s.jsx)("p",{children:"Para clientes que desean migrar desde Pro6 a la nueva versi\xf3n Pro7. Requiere suscripci\xf3n activa."})}),(0,s.jsx)(c.A,{header:"Soluci\xf3n de Problemas",href:"#5-soluci\xf3n-de-problemas-comunes",children:(0,s.jsx)("p",{children:"Ayuda para resolver errores comunes durante el proceso de actualizaci\xf3n."})})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"1-conexi\xf3n-al-servidor",children:"1. Conexi\xf3n al Servidor"}),"\n",(0,s.jsx)(i.h3,{id:"11-acceso-por-ssh",children:"1.1 Acceso por SSH"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"ssh [usuario]@[ip]\n"})}),"\n",(0,s.jsx)(i.h3,{id:"12-verificar-contenedores-activos",children:"1.2 Verificar contenedores activos"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,s.jsx)(i.h3,{id:"13-acceder-al-contenedor-fpm",children:"1.3 Acceder al contenedor FPM"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"docker exec -it [nombre_contenedor_fpm] /bin/bash\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"2-preparaci\xf3n-del-entorno",children:"2. Preparaci\xf3n del Entorno"}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"\ud83d\udca1 Tip:"})," Antes de actualizar, siempre revisa si tienes cambios locales para evitar conflictos."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"21-verificar-estado-del-repositorio",children:"2.1 Verificar estado del repositorio"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git status\n"})}),"\n",(0,s.jsx)(i.h3,{id:"22-guardar-cambios-locales-si-los-hay",children:"2.2 Guardar cambios locales (si los hay)"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git stash\n"})}),"\n",(0,s.jsx)(i.h3,{id:"23-verificar-la-url-del-repositorio-remoto",children:"2.3 Verificar la URL del repositorio remoto"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote -v\n"})}),"\n",(0,s.jsx)(i.p,{children:"Si necesitas actualizar la URL:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote set-url origin https://git.buho.la/facturaloperu/facturador/pro7.git\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"3-actualizaci\xf3n-est\xe1ndar",children:"3. Actualizaci\xf3n Est\xe1ndar"}),"\n",(0,s.jsx)(i.h3,{id:"31-descargar-cambios",children:"3.1 Descargar cambios"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git pull origin main\n"})}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"\u2139\ufe0f Nota:"})," Si se solicitan credenciales, ingresa tu usuario y token de GitLab."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"32-recuperar-cambios-guardados-si-aplicaste-stash",children:"3.2 Recuperar cambios guardados (si aplicaste stash)"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git stash apply\n"})}),"\n",(0,s.jsx)(i.h3,{id:"33-aplicar-migraciones-y-optimizaciones",children:"3.3 Aplicar migraciones y optimizaciones"}),"\n",(0,s.jsx)(i.p,{children:"Puedes ejecutar los comandos individualmente:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"php artisan migrate\r\nphp artisan tenancy:migrate\r\nphp artisan config:cache\r\nphp artisan cache:clear\r\nphp artisan optimize:clear\n"})}),"\n",(0,s.jsx)(i.p,{children:"O ejecutarlos en una sola l\xednea:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"php artisan migrate && php artisan tenancy:migrate && php artisan config:cache && php artisan cache:clear && php artisan optimize:clear\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"4-migraci\xf3n-de-pro6-a-pro7",children:"4. Migraci\xf3n de Pro6 a Pro7"}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"\u26a0\ufe0f Importante:"})," Debes tener una ",(0,s.jsx)(i.strong,{children:"suscripci\xf3n activa"})," para realizar esta migraci\xf3n. Si tu suscripci\xf3n no est\xe1 vigente, contacta al \xe1rea comercial antes de continuar."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"41-cambiar-repositorio-remoto",children:"4.1 Cambiar repositorio remoto"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote set-url origin https://git.buho.la/facturaloperu/facturador/pro7.git\n"})}),"\n",(0,s.jsx)(i.h3,{id:"42-verificar-configuraci\xf3n",children:"4.2 Verificar configuraci\xf3n"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote -v\n"})}),"\n",(0,s.jsx)(i.h3,{id:"43-proceso-de-migraci\xf3n-completa",children:"4.3 Proceso de migraci\xf3n completa"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git status\r\ngit add .\r\ngit stash\r\ngit pull origin main\r\ngit reset --hard origin/main\r\ngit stash apply\n"})}),"\n",(0,s.jsx)(i.h3,{id:"44-verificaci\xf3n-post-migraci\xf3n",children:"4.4 Verificaci\xf3n post-migraci\xf3n"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Confirma que todos los datos se migraron correctamente"}),"\n",(0,s.jsx)(i.li,{children:"Verifica el funcionamiento de las principales funcionalidades"}),"\n",(0,s.jsx)(i.li,{children:"Revisa y ajusta configuraciones seg\xfan tus necesidades"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"5-soluci\xf3n-de-problemas-comunes",children:"5. Soluci\xf3n de Problemas Comunes"}),"\n",(0,s.jsx)(i.h3,{id:"conflictos-de-merge",children:"Conflictos de merge"}),"\n",(0,s.jsxs)(i.p,{children:["Si encuentras conflictos durante ",(0,s.jsx)(i.code,{children:"git pull"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'git status                    # Ver archivos en conflicto\r\n# Resuelve manualmente los conflictos\r\ngit add .                     # Agregar cambios resueltos\r\ngit commit -m "Resolver conflictos de merge"\n'})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"precauciones-y-recomendaciones",children:"Precauciones y Recomendaciones"}),"\n",(0,s.jsx)(i.h3,{id:"\ufe0f-precauciones",children:"\u26a0\ufe0f Precauciones"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["El comando ",(0,s.jsx)(i.code,{children:"git reset --hard origin/main"})," eliminar\xe1 ",(0,s.jsx)(i.strong,{children:"todos"})," los cambios locales no guardados"]}),"\n",(0,s.jsxs)(i.li,{children:["Siempre usar ",(0,s.jsx)(i.code,{children:"git stash"})," para preservar trabajo no confirmado"]}),"\n",(0,s.jsx)(i.li,{children:"Verificar permisos de archivos despu\xe9s de actualizaciones"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"-evitar",children:"\ud83d\udeab Evitar"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Actualizar en horarios de alta demanda"}),"\n",(0,s.jsx)(i.li,{children:"Saltar el proceso de respaldo"}),"\n",(0,s.jsx)(i.li,{children:"Ignorar mensajes de advertencia"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{})]})}function m(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},278335:(e,i,a)=>{a.d(i,{A:()=>l});a(296540);var r=a(634164),s=a(456289),n=a(829030);const c="card_HCHm";var o=a(474848);const l=function(e){const i=void 0===e.href,a=void 0!==e.href&&/^http/.test(e.href),l="undefined"===e.header?null:(0,o.jsx)("header",{className:"Card-header",children:e.header}),d=e.hoverIcon||e.icon,t=(0,o.jsxs)(o.Fragment,{children:[e.img&&(0,o.jsx)("img",{src:(0,n.default)(e.img),className:"Card-image"}),(0,o.jsxs)("div",{className:"Card-container",children:[(e.icon||d)&&(0,o.jsxs)("div",{className:"Card-icon-row",children:[e.icon&&(0,o.jsx)("img",{src:(0,n.default)(e.icon),className:"Card-icon Card-icon-default"}),d&&(0,o.jsx)("img",{src:(0,n.default)(d),className:"Card-icon Card-icon-hover"})]}),e.ionicon&&(0,o.jsx)("ion-icon",{name:e.ionicon,className:"Card-ionicon"}),e.iconset&&(0,o.jsx)("div",{className:"Card-iconset__container",children:e.iconset.split(",").map(((i,a)=>(0,o.jsx)("img",{src:(0,n.default)(i),className:"Card-icon "+(a===e.activeIndex?"Card-icon-active":""),"data-index":a},a)))}),e.header&&l,(0,o.jsx)("div",{className:"Card-content",children:e.children})]})]}),h=(0,r.A)({"Card-with-image":void 0!==e.img,"Card-without-image":void 0===e.img,"Card-size-lg":"lg"===e.size,[e.className]:e.className});return i?(0,o.jsx)("docs-card",{class:h,children:(0,o.jsx)("div",{className:(0,r.A)(c,"docs-card"),children:t})}):a?(0,o.jsx)("docs-card",{class:h,children:(0,o.jsx)("a",{className:(0,r.A)(c,"docs-card"),href:e.href,target:"_blank",children:t})}):(0,o.jsx)("docs-card",{class:h,children:(0,o.jsx)(s.default,{to:e.href,className:(0,r.A)(c,"docs-card"),children:t})})}},716562:(e,i,a)=>{a.d(i,{A:()=>s});a(296540);var r=a(474848);const s=function(e){return(0,r.jsx)("docs-cards",{class:e.className,children:e.children})}}}]);