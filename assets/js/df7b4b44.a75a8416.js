"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[59044],{28453:(e,r,a)=>{a.d(r,{R:()=>c,x:()=>o});var n=a(296540);const s={},i=n.createContext(s);function c(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(i.Provider,{value:r},e.children)}},335976:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"devs/devops/migracion","title":"Gu\xeda de Migraci\xf3n del Proyecto Facturador","description":"Nota: En esta gu\xeda, \\"facturador\\" se refiere al nombre del proyecto, usado para nombre de carpeta, base de datos y dem\xe1s referencias.","source":"@site/Pro7/devs/devops/migracion.md","sourceDirName":"devs/devops","slug":"/devs/devops/migracion","permalink":"/pro7/devs/devops/migracion","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Migraci\xf3n de Servidor con Docker","permalink":"/pro7/devs/devops/migracion-server-docker"},"next":{"title":"Configuraci\xf3n SSH para git.buho.la","permalink":"/pro7/devs/devops/ssh_git_buho_manual"}}');var s=a(474848),i=a(28453);const c={},o="Gu\xeda de Migraci\xf3n del Proyecto Facturador",d={},t=[{value:"Preparaci\xf3n en Servidor A",id:"preparaci\xf3n-en-servidor-a",level:2},{value:"1. Preparaci\xf3n Inicial",id:"1-preparaci\xf3n-inicial",level:3},{value:"2. Preparaci\xf3n de Base de Datos",id:"2-preparaci\xf3n-de-base-de-datos",level:3},{value:"3. Extracci\xf3n de Datos de Clientes",id:"3-extracci\xf3n-de-datos-de-clientes",level:3},{value:"4. Creaci\xf3n de Backups",id:"4-creaci\xf3n-de-backups",level:3},{value:"5. Transferencia al Servidor B",id:"5-transferencia-al-servidor-b",level:3},{value:"Configuraci\xf3n en Servidor B",id:"configuraci\xf3n-en-servidor-b",level:2},{value:"1. Instalaci\xf3n Inicial",id:"1-instalaci\xf3n-inicial",level:3},{value:"2. Restauraci\xf3n de Archivos",id:"2-restauraci\xf3n-de-archivos",level:3},{value:"3. Configuraci\xf3n de Permisos",id:"3-configuraci\xf3n-de-permisos",level:3},{value:"4. Restauraci\xf3n de Bases de Datos",id:"4-restauraci\xf3n-de-bases-de-datos",level:3},{value:"Notas Importantes",id:"notas-importantes",level:2}];function l(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"gu\xeda-de-migraci\xf3n-del-proyecto-facturador",children:"Gu\xeda de Migraci\xf3n del Proyecto Facturador"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Nota"}),': En esta gu\xeda, "facturador" se refiere al nombre del proyecto, usado para nombre de carpeta, base de datos y dem\xe1s referencias.']}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"preparaci\xf3n-en-servidor-a",children:"Preparaci\xf3n en Servidor A"}),"\n",(0,s.jsx)(r.h3,{id:"1-preparaci\xf3n-inicial",children:"1. Preparaci\xf3n Inicial"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Detener el proxy del servidor\r\ndocker stop proxy_proxy_1\r\n\r\n# Instalar herramientas necesarias\r\napt-get install zip unzip\r\n\r\n# Comprimir el proyecto\r\nzip -r facturador.zip /ruta/del/facturador\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-preparaci\xf3n-de-base-de-datos",children:"2. Preparaci\xf3n de Base de Datos"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Obtener el ID del contenedor MySQL\r\ndocker ps | grep mysql\r\n\r\n# Ingresar al contenedor MySQL\r\ndocker exec -ti CONTENEDOR mysql -u root -p\r\n\r\n# Listar bases de datos (dentro de MySQL)\r\nshow databases;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-extracci\xf3n-de-datos-de-clientes",children:"3. Extracci\xf3n de Datos de Clientes"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"-- Ejecutar dentro de MySQL\r\nuse facturador;\r\nselect clients.number, clients.name, hostnames.fqdn, clients.email \r\nfrom clients \r\njoin hostnames \r\nwhere clients.hostname_id = hostnames.id;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-creaci\xf3n-de-backups",children:"4. Creaci\xf3n de Backups"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Crear backup de cada base de datos\r\ndocker exec CONTENEDOR /usr/bin/mysqldump -u root --password=ROOT_PASSWORD DATABASE > DATABASE.sql\n"})}),"\n",(0,s.jsx)(r.h3,{id:"5-transferencia-al-servidor-b",children:"5. Transferencia al Servidor B"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Enviar archivos al servidor destino\r\nscp -r /CARPETA/CON/RESPALDOS USUARIO@IP:/DESTINO/SERVIDOR/B\r\n# Ejemplo:\r\nscp -r /backups/ root@191.162.0.2:/root/backups/\n"})}),"\n",(0,s.jsx)(r.h2,{id:"configuraci\xf3n-en-servidor-b",children:"Configuraci\xf3n en Servidor B"}),"\n",(0,s.jsx)(r.h3,{id:"1-instalaci\xf3n-inicial",children:"1. Instalaci\xf3n Inicial"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Instalar el facturador mediante el script de instalaci\xf3n"}),"\n",(0,s.jsx)(r.li,{children:"Registrar los clientes con los datos extra\xeddos del Servidor A"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"2-restauraci\xf3n-de-archivos",children:"2. Restauraci\xf3n de Archivos"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Copiar contenido de storage\r\ncd /root/backups/facturador/storage/\r\ncp -r app/certificates /root/FACTURADOR/storage/app/\r\ncd app/public\r\ncp -r /uploads /root/FACTURADOR/storage/app/public/\r\ncd ..\r\ncd tenancy/tenants\r\ncp -r tenancy_* /root/FACTURADOR/storage/app/tenancy/tenants/\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-configuraci\xf3n-de-permisos",children:"3. Configuraci\xf3n de Permisos"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Entrar al contenedor PHP\r\ndocker exec -ti CONTENEDOR_PHP bash\r\n\r\n# Asignar permisos\r\nchmod -R 777 storage\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-restauraci\xf3n-de-bases-de-datos",children:"4. Restauraci\xf3n de Bases de Datos"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Restaurar cada base de datos\r\ncat DATABASE.sql | docker exec -i CONTENEDOR /usr/bin/mysql -u root --password=ROOT_PASSWORD DATABASE\n"})}),"\n",(0,s.jsx)(r.h2,{id:"notas-importantes",children:"Notas Importantes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Aseg\xfarese de tener las contrase\xf1as root de MySQL antes de comenzar"}),"\n",(0,s.jsx)(r.li,{children:"Mantenga un registro de los datos de los clientes extra\xeddos"}),"\n",(0,s.jsx)(r.li,{children:"Verifique que todos los archivos se hayan transferido correctamente"}),"\n",(0,s.jsx)(r.li,{children:"Realice pruebas despu\xe9s de la migraci\xf3n para asegurar el funcionamiento correcto"}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);