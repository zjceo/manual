"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1645],{28453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>c});var s=a(296540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}},212745:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"devs/devops/Manuales-adicionales/Doker/Generar-backup","title":"Gu\xeda para generar backup","description":"Desde la terminal de su servidor - Instalaci\xf3n docker","source":"@site/Pro7/devs/devops/Manuales-adicionales/Doker/2-Generar-backup.md","sourceDirName":"devs/devops/Manuales-adicionales/Doker","slug":"/devs/devops/Manuales-adicionales/Doker/Generar-backup","permalink":"/pro7/devs/devops/Manuales-adicionales/Doker/Generar-backup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"docs","previous":{"title":"Iniciar servicios docker","permalink":"/pro7/devs/devops/Manuales-adicionales/Doker/Iniciar-servicios"},"next":{"title":"Manual de Restauraci\xf3n Mysql","permalink":"/pro7/devs/devops/Manuales-adicionales/Doker/Restauracion-MySQL"}}');var r=a(474848),o=a(28453);const i={},c="Gu\xeda para generar backup",l={},d=[{value:"Con un gestor de base de datos",id:"con-un-gestor-de-base-de-datos",level:3}];function t(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"gu\xeda-para-generar-backup",children:"Gu\xeda para generar backup"})}),"\n",(0,r.jsx)(n.p,{children:"Desde la terminal de su servidor - Instalaci\xf3n docker"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Conectarse v\xeda ssh a su instancia"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ubicar el usuario y contrase\xf1a de base de datos, se los deben haber enviado al realizar la instalacion, tambien puede obtenerla accediendo a su proyecto v\xeda ssh y visualizar el archivo .env"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ejecutar docker ps y verificar el contenedor de la base de datos"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:['CONTAINER ID        IMAGE                      COMMAND                     CREATED             STATUS              PORTS                                      NAMES\r\n92f43f53f8e4             stenfrank/php:1.0     "php-fpm7.2"                    18 hours ago        Up 18 hours         9000/tcp                                   multifacturalo_fpm2_1\r\n914a35c72512          redis',":alpine",'               "docker-entrypoint.s\u2026"   18 hours ago        Up 18 hours         0.0.0.0:6381->6379/tcp             multifacturalo_redis2_1\r\nde282cbbbc15          mariadb                    "docker-entrypoint.s\u2026"   18 hours ago         Up 18 hours         0.0.0.0:3307->3306/tcp             multifacturalo_mariadb2_1\r\neb049c8dba9c          stenfrank/nginx:1.0   "nginx"                             18 hours ago        Up 18 hours         80/tcp                                         multifacturalo_nginx2_1']}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"En la lista deber\xe1 fijarse en los NAMES que contengan mariadb ya que en \xe9l deber\xe1 acceder."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"multifacturalo_mariadb2_1 es el contenedor donde podr\xe1 acceder a mysql y utilizar comandos para ello"}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:"Una vez ubicado el contenedor a acceder, ejecute el siguiente comando:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -ti multifacturalo_mariadb2_1 /bin/bash\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsx)(n.li,{children:"De esta manera se conectar\xe1 al contenedor, observar\xe1 un cambio en el inicio de la terminal, ejecute el siguiente comando."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mysqldump -v --opt --events --routines --triggers --default-character-set=utf8 -u root -p tenancy_demo > db_backup_your_db_name.sql\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Donde:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"root es el usuario de su base de datos"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"tenancy_demo el nombre de la base de datos a respaldar"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"db_backup_your_db_name.sql es el nombre backup de su base de datos"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Luego de ejecutar el comando, debe ingresar la contrase\xf1a de su base de datos, seleccione enter."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"a. Enter password:"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Se generar\xe1 su backup, ejecute el comando ls, visualizara el archivo .sql generado."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Salga del contenedor, con el comando"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"a. Exit"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Debe copiar el archivo .sql desde el contenedor hacia una carpeta del servidor"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker cp multifacturalo_mariadb2_1:/db_backup_your_db_name.sql copiabackup.sql\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Donde:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"multifacturalo_mariadb2_1 es el contenedor."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"copiabackup.sql es el nombre de la copia del archivo .sql, este es el que visualizara fuera  del contenedor."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"db_backup_your_db_name.sql es el nombre backup de su base de datos"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Conectese con un software a su servidor para que pueda extraer el archivo, por ejemplo winscp, etc."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"con-un-gestor-de-base-de-datos",children:"Con un gestor de base de datos"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verificar si cuenta con el puerto 3306 aperturado, caso contrario aperturarlo"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["1. Google: ",(0,r.jsx)(n.a,{href:"https://cloud.google.com/vpc/docs/using-firewalls?hl=es-419",children:"https://cloud.google.com/vpc/docs/using-firewalls?hl=es-419"})]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["2. AWS: ",(0,r.jsx)(n.a,{href:"https://www.youtube.com/watch?v=MKxB8ZT2kfk",children:"https://www.youtube.com/watch?v=MKxB8ZT2kfk"})]})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ubicar el usuario y contrase\xf1a de base de datos, se los deben haber enviado al realizar la instalacion, tambien puede obtenerla accediendo a su proyecto v\xeda ssh y visualizar el archivo .env"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ubicar la IP de su servidor"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Usar un software como heidi, navicat, mysqlworkbench entre otros e ingresar la ip, usuario y contrase\xf1a"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Referencia: ",(0,r.jsx)(n.a,{href:"https://webenabled.com/using-navicat",children:"https://webenabled.com/using-navicat"})]})}),"\n",(0,r.jsx)(n.p,{children:"Exportar BD:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://documentation.alphasoftware.com/documentation/pages/HowTo/Databases/Export%20Tables%20from%20a%20Database.xml",children:"https://documentation.alphasoftware.com/documentation/pages/HowTo/Databases/Export%20Tables%20from%20a%20Database.xml"})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://support.appliedi.net/kb/a1034/how-to-import-and-export-a-mysql-database-using-heidisql.aspx",children:"https://support.appliedi.net/kb/a1034/how-to-import-and-export-a-mysql-database-using-heidisql.aspx"})})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}}}]);