"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[92047],{28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var s=n(296540);const a={},o=s.createContext(a);function i(e){const r=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:r},e.children)}},447380:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"multi-empresa/guias-adicionales/migracion-pro5-pro6","title":"Migracion del Pro5 a Pro6","description":"Se presentar\xe1 los pasos para poder migrar su sistema del Pro5 a la nueva versi\xf3n de Pro6.","source":"@site/Pro7/multi-empresa/guias-adicionales/04-migracion-pro5-pro6.md","sourceDirName":"multi-empresa/guias-adicionales","slug":"/multi-empresa/guias-adicionales/migracion-pro5-pro6","permalink":"/manual/pro7/multi-empresa/guias-adicionales/migracion-pro5-pro6","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"docs","previous":{"title":"\xbfQu\xe9 es el PSE y OSE?","permalink":"/manual/pro7/multi-empresa/guias-adicionales/PSE-OSE"},"next":{"title":"Migraci\xf3n de su proyecto entre servidores","permalink":"/manual/pro7/multi-empresa/guias-adicionales/migracion-entre-servidores"}}');var a=n(474848),o=n(28453);const i={},l="Migracion del Pro5 a Pro6",c={},t=[{value:"Pasos",id:"pasos",level:2},{value:"Posibles errores",id:"posibles-errores",level:2},{value:"Error al ejecutar el composer install",id:"error-al-ejecutar-el-composer-install",level:3},{value:"Error &quot;<strong>Server certificate verification failed</strong>&quot;",id:"error-server-certificate-verification-failed",level:3}];function d(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"migracion-del-pro5-a-pro6",children:"Migracion del Pro5 a Pro6"})}),"\n",(0,a.jsx)(r.p,{children:"Se presentar\xe1 los pasos para poder migrar su sistema del Pro5 a la nueva versi\xf3n de Pro6."}),"\n",(0,a.jsx)(r.h2,{id:"pasos",children:"Pasos"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Detener el proxy"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"docker stop proxy_proxy_1\n"})}),"\n",(0,a.jsx)(r.admonition,{title:"\xbfPor qu\xe9?",type:"note",children:(0,a.jsx)(r.p,{children:"Este paso se hace principalmente para que ning\xfan cliente pueda acceder al sistema mientras se esta actualizando el sistema"})}),"\n",(0,a.jsxs)(r.ol,{start:"2",children:["\n",(0,a.jsx)(r.li,{children:"Dirigirse a su contenedor FPM"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"docker exec -ti [contenedor_fpm] bash\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"3",children:["\n",(0,a.jsx)(r.li,{children:"Coloque este comando para verificar donde esta apuntado el remoto"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git remote -v \r\n# origin https://gitlab.buho.la/buho/facturador/facturador5.git (fetch) \r\n# origin https://gitlab.buho.la/buho/facturador/facturador5.git (push) \n"})}),"\n",(0,a.jsx)(r.admonition,{title:"Tenga en cuenta",type:"note",children:(0,a.jsx)(r.p,{children:"Lo que se muestra arriba es un ejemplo de lo que se podr\xe1 ver dentro de su consola."})}),"\n",(0,a.jsxs)(r.ol,{start:"4",children:["\n",(0,a.jsx)(r.li,{children:"Ahora se tiene que establecer el nuevo remoto para que se actualice, coloque el siguiente"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git remote set-url origin https://gitlab.buho.la/pro6/pro6.git\n"})}),"\n",(0,a.jsxs)(r.p,{children:["Alguna veces podria presentar que el ",(0,a.jsx)(r.strong,{children:"origin"})," tenga otro nombre ya que es un alias, por ejemplo"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git remote -v \r\n# buho https://gitlab.buho.la/buho/facturador/facturador5.git (fetch) \r\n# buho https://gitlab.buho.la/buho/facturador/facturador5.git (push) \n"})}),"\n",(0,a.jsx)(r.p,{children:"En estos casos solo tendr\xedas que hacer un cambio"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git remote set-url buho https://gitlab.buho.la/pro6/pro6.git\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"5",children:["\n",(0,a.jsx)(r.li,{children:"Con todo ya hecho, bajamos los cambios del repositorio"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git pull origin master\n"})}),"\n",(0,a.jsx)(r.p,{children:"Y s\xed se eligi\xf3 otro al\xedas entonces ser\xeda"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git pull buho master\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"6",children:["\n",(0,a.jsx)(r.li,{children:"Luego, tenemos que actualizar las dependencias, sigue los siguientes comandos"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"rm -r vendor; composer install\n"})}),"\n",(0,a.jsx)(r.p,{children:"Posiblemente pueda suceder errores, en la secci\xf3n final se pondra las posibles soluciones que pueda occurir a la hora de hacer composer install."}),"\n",(0,a.jsxs)(r.p,{children:["Despu\xe9s de eso, dar permisos con el siguiente comando ",(0,a.jsx)(r.code,{children:"chmod -R 777 vendor/mpdf/mpdf"}),"."]}),"\n",(0,a.jsxs)(r.ol,{start:"7",children:["\n",(0,a.jsx)(r.li,{children:"Ejecutar migraciones"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"php artisan migrate; php artisan tenancy:migrate\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"8",children:["\n",(0,a.jsx)(r.li,{children:"Limpiar cache"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"php artisan config:cache; php artisan cache clear\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"9",children:["\n",(0,a.jsx)(r.li,{children:"Luego ingresar al archivo .env con el siguiente comando ````nano .env``` y luego coloca al final del archvo lo siguiente:"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-.env",children:"MULTI_USER_ENABLED=true\r\nTENANT_SESSION_LIFETIME_ENABLED=true\r\nSESSION_LIFETIME=60\n"})}),"\n",(0,a.jsxs)(r.p,{children:["y luego colocar el siguiente comando ",(0,a.jsx)(r.code,{children:"php artisan optimize:clear"})]}),"\n",(0,a.jsx)(r.p,{children:"Con esto, ya tendr\xe1s el sistema migrado al Pro6."}),"\n",(0,a.jsx)(r.h2,{id:"posibles-errores",children:"Posibles errores"}),"\n",(0,a.jsx)(r.h3,{id:"error-al-ejecutar-el-composer-install",children:"Error al ejecutar el composer install"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Primera opci\xf3n es ejecutar el siguiente comando"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-php",children:"composer self-update\n"})}),"\n",(0,a.jsxs)(r.p,{children:["Luego volver a ejecutar el comando ",(0,a.jsx)(r.code,{children:"composer install"})]}),"\n",(0,a.jsxs)(r.ol,{start:"2",children:["\n",(0,a.jsx)(r.li,{children:"Segunda opci\xf3n se debe borrar un archivo con el siguiente comando"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"rm composer.lock\n"})}),"\n",(0,a.jsxs)(r.p,{children:["Luego volver a ejecutar el comando ",(0,a.jsx)(r.code,{children:"composer install"})]}),"\n",(0,a.jsxs)(r.h3,{id:"error-server-certificate-verification-failed",children:['Error "',(0,a.jsx)(r.strong,{children:"Server certificate verification failed"}),'"']}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Se debe ejecutar el siguiente comando"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"git config --global http sslverify false\n"})})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);